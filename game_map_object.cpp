
// ////////////////////////////////////////////////////////////////////////////
// Includes
// ////////////////////////////////////////////////////////////////////////////

#include <QDebug>
#include <QGraphicsRectItem>
#include "game_map_object.h"

// ////////////////////////////////////////////////////////////////////////////
// Globals
// ////////////////////////////////////////////////////////////////////////////

QList<GameMapObject*> gameObjects;

// ////////////////////////////////////////////////////////////////////////////
// Constructor
// ////////////////////////////////////////////////////////////////////////////

GameMapObject::GameMapObject(QWidget *parent, int x, int y)
{
    this->m_x = x;
    this->m_y = y;

    QGraphicsRectItem* rect = new QGraphicsRectItem(-25, -25, 50, 50);
    //rect->setBrush(Qt::red);
    rect->moveBy(x*0.6, y*0.6);

    this->m_item = rect;

    gameObjects.append(this);
}

// ////////////////////////////////////////////////////////////////////////////
// Methods
// ////////////////////////////////////////////////////////////////////////////

GameMapObject::~GameMapObject() {

    gameObjects.removeOne(this);
    delete this->m_item;

}

int GameMapObject::X() {
    return this->m_x;
}

int GameMapObject::Y() {
    return this->m_y;
}

QGraphicsItem* GameMapObject::getItem() {
    return this->m_item;
}

// ////////////////////////////////////////////////////////////////////////////
// Functions
// ////////////////////////////////////////////////////////////////////////////

QDebug operator<<(QDebug debug, GameMapObject* object) {
    QDebugStateSaver saver(debug);
    debug.nospace() << "GameObject(" << object->X() << "," << object->Y() << ")";
    return debug;
}
